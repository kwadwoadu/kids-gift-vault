<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Gift Vault</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Sound Toggle (Global) -->
    <button id="sound-toggle" class="sound-toggle" aria-label="Toggle sound">
        <span class="sound-on">üîä</span>
        <span class="sound-off" style="display: none;">üîá</span>
    </button>

    <!-- Snowfall Overlay -->
    <div id="snowfall" class="snowfall" aria-hidden="true"></div>

    <!-- Screen 0: Welcome -->
    <div id="screen-welcome" class="screen active">
        <div class="family-photo-container">
            <img src="family.png" alt="Family Christmas Photo" class="family-photo">
        </div>
        <h1 class="welcome-title">The Gift Vault</h1>
        <p class="welcome-subtitle">For Sean & Paloma</p>
        <button class="tap-prompt pulse" onclick="goToScreen('vault')">
            Tap to Enter
        </button>
    </div>

    <!-- Screen 1: Vault (Main Hub) -->
    <div id="screen-vault" class="screen">
        <div class="vault-header">
            <h1>Choose Who Opens a Gift</h1>
        </div>
        <div class="gift-doors">
            <button class="gift-door sean-door" onclick="goToScreen('sean-challenge')">
                <div class="door-bow sean-bow"></div>
                <div class="door-label">Sean's Gift</div>
                <div class="door-icon">‚öΩ</div>
            </button>
            <button class="gift-door paloma-door" onclick="goToScreen('paloma-challenge')">
                <div class="door-bow paloma-bow"></div>
                <div class="door-label">Paloma's Gift</div>
                <div class="door-icon">üé§</div>
            </button>
            <button class="gift-door together-door" onclick="goToScreen('together-challenge')">
                <div class="door-bow together-bow"></div>
                <div class="door-label">A Gift for Both</div>
                <div class="door-icon">üéÆ</div>
            </button>
        </div>
        <div class="fairy-lights" aria-hidden="true"></div>
    </div>

    <!-- Screen 2: Sean Challenge - Penalty Shootout -->
    <div id="screen-sean-challenge" class="screen sean-theme">
        <button class="back-btn" onclick="goToScreen('vault')">‚Üê Back</button>
        <h1 class="challenge-title">Beat the Goalkeeper!</h1>
        <p class="challenge-instruction">Score 5 goals to unlock your gift!</p>

        <div class="stadium">
            <div class="stadium-lights">
                <div class="light l1"></div>
                <div class="light l2"></div>
                <div class="light l3"></div>
                <div class="light l4"></div>
            </div>
            <div class="goal-frame">
                <div class="goal-net"></div>
                <div class="goal-zones">
                    <div class="zone left"></div>
                    <div class="zone center"></div>
                    <div class="zone right"></div>
                </div>
                <div id="goalkeeper" class="goalkeeper">üß§</div>
                <div id="goal-text" class="goal-text hidden">GOAL!</div>
                <div id="save-text" class="save-text hidden">SAVED!</div>
            </div>
            <div class="pitch">
                <div class="pitch-line center-circle"></div>
                <div class="penalty-spot"></div>
                <div id="ball" class="ball">‚öΩ</div>
            </div>
        </div>

        <div class="aim-buttons">
            <button class="aim-btn" data-aim="left" onclick="SeanGame.aim('left')">
                <span class="aim-arrow">‚¨ÖÔ∏è</span>
                <span class="aim-label">LEFT</span>
            </button>
            <button class="aim-btn" data-aim="center" onclick="SeanGame.aim('center')">
                <span class="aim-arrow">‚¨ÜÔ∏è</span>
                <span class="aim-label">CENTER</span>
            </button>
            <button class="aim-btn" data-aim="right" onclick="SeanGame.aim('right')">
                <span class="aim-arrow">‚û°Ô∏è</span>
                <span class="aim-label">RIGHT</span>
            </button>
        </div>

        <div class="scoreboard">
            <div class="score-display">
                <span id="sean-goals" class="goals">0</span>
                <span class="score-divider">/</span>
                <span class="target">5</span>
                <span class="score-label">Goals</span>
            </div>
            <div id="attempts-display" class="attempts">Kicks left: <span id="kicks-left">7</span></div>
        </div>

        <button id="sean-unlock" class="unlock-btn hidden" onclick="goToScreen('sean-reveal')">
            Open Your Gift!
        </button>
    </div>

    <!-- Screen 3: Sean Reveal -->
    <div id="screen-sean-reveal" class="screen sean-theme">
        <button class="back-btn" onclick="goToScreen('vault')">‚Üê Back</button>
        <div class="reveal-content">
            <div class="gift-burst"></div>
            <h1 class="reveal-title">EA FC 25</h1>
            <p class="reveal-subtitle">Your game. Your team. Your turn to WIN!</p>
            <div class="video-container">
                <iframe
                    src="https://www.youtube.com/embed/pBM2xyco_Kg?rel=0&modestbranding=1"
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen>
                </iframe>
            </div>
        </div>
        <div class="reveal-buttons">
            <button class="secondary-btn" onclick="goToScreen('vault')">Back to Vault</button>
            <button class="primary-btn" onclick="goToScreen('finale-sean')">Merry Christmas, Sean!</button>
        </div>
    </div>

    <!-- Screen 4: Paloma Challenge - Jingle Bells Melody -->
    <div id="screen-paloma-challenge" class="screen paloma-theme">
        <button class="back-btn" onclick="goToScreen('vault')">‚Üê Back</button>
        <h1 class="challenge-title">Build the Magic Melody!</h1>
        <p class="challenge-instruction">Tap to sing Jingle Bells!</p>

        <div class="stage-enhanced">
            <div class="curtain left"></div>
            <div class="curtain right"></div>
            <div class="spotlight"></div>
            <div class="sound-waves">
                <div class="wave w1"></div>
                <div class="wave w2"></div>
                <div class="wave w3"></div>
            </div>

            <div class="star-progress" id="star-progress">
                <span class="star" data-index="0">‚òÜ</span>
                <span class="star" data-index="1">‚òÜ</span>
                <span class="star" data-index="2">‚òÜ</span>
                <span class="star" data-index="3">‚òÜ</span>
                <span class="star" data-index="4">‚òÜ</span>
                <span class="star" data-index="5">‚òÜ</span>
                <span class="star" data-index="6">‚òÜ</span>
                <span class="star" data-index="7">‚òÜ</span>
            </div>

            <div id="lyrics-display" class="lyrics-display"></div>

            <button id="microphone" class="microphone-enhanced" onclick="PalomaGame.tap()">
                üé§
                <div class="mic-glow"></div>
                <div id="sparkle-container" class="sparkle-container"></div>
            </button>

            <div id="notes-container" class="notes-container"></div>
        </div>

        <div class="tap-counter">
            <span id="melody-progress">Tap to start!</span>
        </div>

        <button id="paloma-unlock" class="unlock-btn hidden" onclick="goToScreen('paloma-reveal')">
            Open Your Gift!
        </button>
    </div>

    <!-- Screen 5: Paloma Reveal -->
    <div id="screen-paloma-reveal" class="screen paloma-theme">
        <button class="back-btn" onclick="goToScreen('vault')">‚Üê Back</button>
        <div class="reveal-content">
            <div class="spotlight"></div>
            <h1 class="reveal-title">Let's Sing</h1>
            <p class="reveal-highlight">+ 2 Microphones!</p>
            <p class="reveal-subtitle">Your voice. Your stage. Time to SHINE!</p>
            <div class="video-container">
                <iframe
                    src="https://www.youtube.com/embed/LB4WpYcCoco?rel=0&modestbranding=1"
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen>
                </iframe>
            </div>
        </div>
        <div class="reveal-buttons">
            <button class="secondary-btn" onclick="goToScreen('vault')">Back to Vault</button>
            <button class="primary-btn" onclick="goToScreen('finale-paloma')">Merry Christmas, Paloma!</button>
        </div>
    </div>

    <!-- Screen 6: Together Challenge - Magic Portal -->
    <div id="screen-together-challenge" class="screen together-theme">
        <button class="back-btn" onclick="goToScreen('vault')">‚Üê Back</button>
        <h1 class="challenge-title">Open the Magic Portal!</h1>

        <div class="step-indicator">
            <span class="step active" data-step="1">1. Hold</span>
            <span class="step-arrow">‚Üí</span>
            <span class="step" data-step="2">2. Swipe</span>
            <span class="step-arrow">‚Üí</span>
            <span class="step" data-step="3">3. Tap!</span>
        </div>

        <div class="portal-arena">
            <button id="sean-orb" class="magic-orb sean-orb"
                    ontouchstart="PortalGame.orbPress('sean')"
                    ontouchend="PortalGame.orbRelease('sean')"
                    onmousedown="PortalGame.orbPress('sean')"
                    onmouseup="PortalGame.orbRelease('sean')">
                <span class="orb-initial">S</span>
                <div class="energy-stream sean-stream"></div>
            </button>

            <div id="portal" class="magic-portal">
                <div class="portal-ring ring-1"></div>
                <div class="portal-ring ring-2"></div>
                <div class="portal-ring ring-3"></div>
                <div class="portal-center">
                    <div id="portal-progress" class="portal-progress"></div>
                </div>
                <div id="sackboy-reveal" class="sackboy hidden">üß∏</div>
            </div>

            <button id="paloma-orb" class="magic-orb paloma-orb"
                    ontouchstart="PortalGame.orbPress('paloma')"
                    ontouchend="PortalGame.orbRelease('paloma')"
                    onmousedown="PortalGame.orbPress('paloma')"
                    onmouseup="PortalGame.orbRelease('paloma')">
                <span class="orb-initial">P</span>
                <div class="energy-stream paloma-stream"></div>
            </button>
        </div>

        <div class="magic-power-bar">
            <div id="power-fill" class="power-fill"></div>
        </div>

        <p id="portal-instruction" class="portal-instruction">
            Both hold your orbs for 3 seconds!
        </p>

        <button id="together-unlock" class="unlock-btn hidden" onclick="goToScreen('together-reveal')">
            Open Your Gift!
        </button>
    </div>

    <!-- Screen 7: Together Reveal -->
    <div id="screen-together-reveal" class="screen together-theme">
        <button class="back-btn" onclick="goToScreen('vault')">‚Üê Back</button>
        <div class="reveal-content">
            <div class="sackboy-entrance">
                <div class="sackboy">üß∏</div>
            </div>
            <h1 class="reveal-title">Sackboy: A Big Adventure</h1>
            <p class="reveal-subtitle">For BOTH of you. Play together. Win together!</p>
            <div class="video-container">
                <iframe
                    src="https://www.youtube.com/embed/s3BJSgaGNcc?rel=0&modestbranding=1"
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen>
                </iframe>
            </div>
        </div>
        <div class="reveal-buttons">
            <button class="secondary-btn" onclick="goToScreen('vault')">Back to Vault</button>
            <button class="primary-btn" onclick="goToScreen('finale-together')">Merry Christmas, Team!</button>
        </div>
    </div>

    <!-- Screen 8: Finale -->
    <div id="screen-finale" class="screen finale-theme">
        <div id="confetti-container" class="confetti-container"></div>
        <div class="finale-content">
            <h1 class="finale-title" id="finale-title">Merry Christmas!</h1>
            <p class="finale-names" id="finale-names">Sean & Paloma</p>
            <p class="finale-message">We love you so much.<br>Have fun with your new games!</p>
            <div class="finale-hearts">‚ù§Ô∏è üéÑ ‚ù§Ô∏è</div>
        </div>
        <button class="vault-return-btn" onclick="goToScreen('vault')">
            Back to Gift Vault
        </button>
    </div>

    <script src="script.js"></script>
</body>
</html>
